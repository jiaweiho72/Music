{"version":3,"sources":["useAnimatedValue.ts"],"names":["useEffect","Easing","runOnJS","useAnimatedProps","useDerivedValue","useSharedValue","withDelay","withTiming","useCircleValues","useAnimatedValue","initialValue","radius","maxValue","clockwise","delay","value","duration","onAnimationComplete","activeStrokeWidth","inActiveStrokeWidth","progressFormatter","v","Math","round","animatedValue","circleCircumference","animatedCircleProps","biggestValue","max","maxPercentage","strokeDashoffset","easing","linear","isFinished","progressValue","animatedTextProps","text"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SACEC,MADF,EAEEC,OAFF,EAGEC,gBAHF,EAIEC,eAJF,EAKEC,cALF,EAMEC,SANF,EAOEC,UAPF,QAQO,yBARP;AASA,OAAOC,eAAP,MAA4B,mBAA5B;AAkBA,eAAe,SAASC,gBAAT,OAgBW;AAAA,MAhBe;AACvCC,IAAAA,YAAY,GAAG,CADwB;AAEvCC,IAAAA,MAAM,GAAG,EAF8B;AAGvCC,IAAAA,QAAQ,GAAG,GAH4B;AAIvCC,IAAAA,SAJuC;AAKvCC,IAAAA,KAAK,GAAG,CAL+B;AAMvCC,IAAAA,KANuC;AAOvCC,IAAAA,QAPuC;AAQvCC,IAAAA,mBAAmB,GAAG,MAAM,IARW;AASvCC,IAAAA,iBAAiB,GAAG,EATmB;AAUvCC,IAAAA,mBAAmB,GAAG,EAViB;AAWvCC,IAAAA,iBAAiB,GAAIC,CAAD,IAAe;AACjC;;AAEA,aAAOC,IAAI,CAACC,KAAL,CAAWF,CAAX,CAAP;AACD;AAfsC,GAgBf;AACxB,QAAMG,aAAa,GAAGnB,cAAc,CAACK,YAAD,CAApC;AACA,QAAM;AAAEe,IAAAA;AAAF,MAA0BjB,eAAe,CAAC;AAC9CG,IAAAA,MAD8C;AAE9CO,IAAAA,iBAF8C;AAG9CC,IAAAA;AAH8C,GAAD,CAA/C;AAMA,QAAMO,mBAAmB,GAAGvB,gBAAgB,CAAC,MAAM;AACjD,QAAIwB,YAAoB,GAAGL,IAAI,CAACM,GAAL,CAASlB,YAAT,EAAuBE,QAAvB,CAA3B;AACAe,IAAAA,YAAY,GAAGA,YAAY,IAAI,CAAhB,GAAoB,CAApB,GAAwBA,YAAvC;AACA,UAAME,aAAqB,GAAGhB,SAAS,GAClC,MAAMW,aAAa,CAACT,KAArB,GAA8BY,YADK,GAElC,MAAM,CAACH,aAAa,CAACT,KAAtB,GAA+BY,YAFnC;AAGA,WAAO;AACLG,MAAAA,gBAAgB,EACdL,mBAAmB,GAAIA,mBAAmB,GAAGI,aAAvB,GAAwC;AAF3D,KAAP;AAID,GAV2C,CAA5C;AAYA7B,EAAAA,SAAS,CAAC,MAAM;AACdwB,IAAAA,aAAa,CAACT,KAAd,GAAsBT,SAAS,CAC7BQ,KAD6B,EAE7BP,UAAU,CAACQ,KAAD,EAAQ;AAAEC,MAAAA,QAAF;AAAYe,MAAAA,MAAM,EAAE9B,MAAM,CAAC+B;AAA3B,KAAR,EAA8CC,UAAD,IAAgB;AACrE,UAAIA,UAAJ,EAAgB;AAAA;;AACd,oBAAA/B,OAAO,CAACe,mBAAD,CAAP;AACD;AACF,KAJS,CAFmB,CAA/B;AAQD,GATQ,EASN,CAACF,KAAD,CATM,CAAT;AAWA,QAAMmB,aAAa,GAAG9B,eAAe,CAAC,MAAM;AAC1C,WAAQ,GAAEgB,iBAAiB,CAACI,aAAa,CAACT,KAAf,CAAsB,EAAjD;AACD,GAFoC,CAArC;AAIA,QAAMoB,iBAAiB,GAAGhC,gBAAgB,CAAC,MAAM;AAC/C,WAAO;AACLiC,MAAAA,IAAI,EAAEF,aAAa,CAACnB;AADf,KAAP;AAGD,GAJyC,CAA1C;AAMA,SAAO;AACLW,IAAAA,mBADK;AAELS,IAAAA,iBAFK;AAGLD,IAAAA;AAHK,GAAP;AAKD","sourcesContent":["import { useEffect } from 'react';\nimport {\n  Easing,\n  runOnJS,\n  useAnimatedProps,\n  useDerivedValue,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated';\nimport useCircleValues from './useCircleValues';\n\nexport interface UseAnimatedValueProps {\n  value: number;\n  initialValue?: number;\n  radius?: number;\n  duration?: number;\n  delay?: number;\n  maxValue?: number;\n  onAnimationComplete?: () => void;\n  activeStrokeWidth?: number;\n  inActiveStrokeWidth?: number;\n  clockwise?: boolean;\n  valueSuffix?: string;\n  valuePrefix?: string;\n  progressFormatter?: (v: number) => number | string;\n}\n\nexport default function useAnimatedValue({\n  initialValue = 0,\n  radius = 60,\n  maxValue = 100,\n  clockwise,\n  delay = 0,\n  value,\n  duration,\n  onAnimationComplete = () => null,\n  activeStrokeWidth = 10,\n  inActiveStrokeWidth = 10,\n  progressFormatter = (v: number) => {\n    'worklet';\n\n    return Math.round(v);\n  },\n}: UseAnimatedValueProps) {\n  const animatedValue = useSharedValue(initialValue);\n  const { circleCircumference } = useCircleValues({\n    radius,\n    activeStrokeWidth,\n    inActiveStrokeWidth,\n  });\n\n  const animatedCircleProps = useAnimatedProps(() => {\n    let biggestValue: number = Math.max(initialValue, maxValue);\n    biggestValue = biggestValue <= 0 ? 1 : biggestValue;\n    const maxPercentage: number = clockwise\n      ? (100 * animatedValue.value) / biggestValue\n      : (100 * -animatedValue.value) / biggestValue;\n    return {\n      strokeDashoffset:\n        circleCircumference - (circleCircumference * maxPercentage) / 100,\n    };\n  });\n\n  useEffect(() => {\n    animatedValue.value = withDelay(\n      delay,\n      withTiming(value, { duration, easing: Easing.linear }, (isFinished) => {\n        if (isFinished) {\n          runOnJS(onAnimationComplete)?.();\n        }\n      })\n    );\n  }, [value]);\n\n  const progressValue = useDerivedValue(() => {\n    return `${progressFormatter(animatedValue.value)}`;\n  });\n\n  const animatedTextProps = useAnimatedProps(() => {\n    return {\n      text: progressValue.value,\n    } as any;\n  });\n\n  return {\n    animatedCircleProps,\n    animatedTextProps,\n    progressValue,\n  };\n}\n"]}